{"version":3,"file":"js/983.fc309978.js","mappings":"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","sources":["webpack://island-travel/./src/views/FavoriteView.vue","webpack://island-travel/./src/views/FavoriteView.vue?95b2"],"sourcesContent":["<template>\n  <VueLoading :active=\"isLoading\"/>\n  <div class=\"section\">\n    <div class=\"background-image background-image--favorite\"></div>\n    <div class=\"background-title\">\n      <h2 class=\"fw-bold\">收藏清單</h2>\n    </div>\n  </div>\n  <div class=\"container mt-md-5 mt-3 mb-5\">\n    <div v-if=\"favoritesList.length\">\n      <div class=\"d-flex justify-content-center align-items-center mb-5\">\n        <h3 class=\"section-heading\">收藏清單</h3>\n      </div>\n      <table class=\"table favorite__table\">\n        <thead>\n          <tr>\n            <th scope=\"col\" class=\"border-0 ps-0\">商品名稱</th>\n            <th scope=\"col\" class=\"border-0\">價格</th>\n            <th scope=\"col\" class=\"border-0\">狀態</th>\n            <th scope=\"col\" class=\"border-0\">移除</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in favoritesList\" :key=\"item.id\" class=\"border-bottom border-top\">\n            <th scope=\"row\" class=\"border-0 px-0 font-weight-normal py-4\">\n              <RouterLink :to=\"`/product/${item.id}`\">\n                <img class=\"favorite__thumbnail\"\n                  :src=\"item.imageUrl\" alt=\"{{ item.title }}\">\n                <p class=\"mb-0 fw-bold ms-3 d-inline-block text-dark\">{{ item.title }}</p>\n              </RouterLink>\n            </th>\n            <td class=\"favorite__price\">\n              <p class=\"\">NT$ {{ item.price }} / {{ item.unit }}</p>\n            </td>\n            <td class=\"border-0 align-middle\">\n              <button class=\"btn-primary btn\" type=\"button\"\n              @click=\"addToCart(item.id)\" :disabled=\"isLoadingItem === item.id\">\n                <span class=\"spinner-border spinner-border-sm\"\n                  role=\"status\" v-show=\"isLoadingItem === item.id\"></span>\n                  加入購物車\n              </button>\n            </td>\n            <td class=\"border-0 align-middle\">\n              <i class=\"bi bi-trash-fill fs-5\" role=\"button\" @click=\"removeFavorite(item.id)\"></i>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <ul class=\"cart__list d-md-none\">\n        <li\n          class=\"card cart__card\"\n          v-for=\"item in favoritesList\"\n          :key=\"item.id\">\n            <div class=\"d-flex justify-content-between\">\n              <span class=\"icon--close icon-close--sp cartNav__close\" @click=\"removeFavorite(item.id)\"></span>\n              <img class=\"favorite__thumbnail\"\n              :src=\"item.imageUrl\" alt=\"{{ item.title }}\">\n              <div class=\"cart__card__content\">\n                {{ item.title }}\n                <p class=\"mb-0 ms-auto\">小計: NT$ {{ item.price }}</p>\n                <button class=\"btn-primary btn w-100 mt-2\" type=\"button\"\n                @click=\"addToCart(item.id)\" :disabled=\"isLoadingItem === item.id\">\n                  <span class=\"spinner-border spinner-border-sm\"\n                    role=\"status\" v-show=\"isLoadingItem === item.id\"></span>\n                    加入購物車\n                </button>\n              </div>\n            </div>\n        </li>\n      </ul>\n    </div>\n    <div v-else class=\"container--center\">\n      <h3 class=\"text-center\">目前還沒有收藏行程唷！<br>快去逛逛吧！</h3>\n      <RouterLink to=\"/products\"\n      class=\"button--jump mt-5\"\n      @click=\"isOpen = !isOpen\">開始旅程</RouterLink>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data () {\n    return {\n      products: [],\n      favoritesList: [],\n      isDisabled: '',\n      isLoading: false,\n      isLoadingItem: '',\n      favorite: JSON.parse(localStorage.getItem('favorite')) || []\n    }\n  },\n  inject: ['emitter'],\n  methods: {\n    getProducts () {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/`\n      this.isLoading = true\n      this.$http.get(api)\n        .then((response) => {\n          this.products = response.data.products\n          this.getFavorites()\n          this.isLoading = false\n        })\n        .catch((error) => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '找不到收藏清單',\n            content: error.response.data.message\n          })\n        })\n    },\n    getFavorites () {\n      this.favoritesList = this.products.filter(\n        (item) => this.favorite.indexOf(item.id) > -1\n      )\n    },\n    addToCart (id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.isLoading = true\n      this.$http.post(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`, { data })\n        .then((response) => {\n          this.emitter.emit('push-message', {\n            style: 'success',\n            title: '購物提示',\n            content: response.data.message\n          })\n          this.isLoading = false\n          this.isDisabled = ''\n          emitter.emit('get-cart')\n        })\n        .catch((error) => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '無法加入購物車',\n            content: error.response.data.message\n          })\n        })\n    },\n    removeFavorite (id) {\n      this.isLoading = true\n      const favoriteId = this.favorite.indexOf(id)\n      if (favoriteId !== -1) {\n        this.favorite.splice(favoriteId, 1)\n        localStorage.setItem('favorite', JSON.stringify(this.favorite))\n        this.getFavorites()\n        this.isLoading = false\n        this.emitter.emit('push-message', {\n          style: 'success',\n          title: '已刪除'\n        })\n      }\n    }\n  },\n  mounted () {\n    this.getProducts()\n  }\n}\n</script>\n","import { render } from \"./FavoriteView.vue?vue&type=template&id=6107765b\"\nimport script from \"./FavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoriteView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wangangel/project/island-travel/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","scope","role","_createVNode","_component_VueLoading","active","$data","_hoisted_1","length","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_6","_Fragment","_renderList","item","key","id","_component_RouterLink","to","src","imageUrl","alt","_toDisplayString","title","price","unit","type","onClick","$options","disabled","_hoisted_28","_ctx","data","products","favoritesList","isDisabled","isLoading","isLoadingItem","favorite","JSON","parse","localStorage","getItem","inject","methods","getProducts","api","this","$http","get","then","response","getFavorites","catch","error","emitter","emit","style","content","message","filter","indexOf","addToCart","qty","product_id","post","removeFavorite","favoriteId","splice","setItem","stringify","mounted","__exports__","render"],"sourceRoot":""}