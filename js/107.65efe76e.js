"use strict";(self["webpackChunkisland_travel"]=self["webpackChunkisland_travel"]||[]).push([[107],{2651:function(e,t,i){i.d(t,{Z:function(){return u}});var s=i(6252),a=i(3577),o=i(9963);const c={"aria-label":"Page navigation"},r={class:"pagination"},l=["onClick"];function n(e,t,i,n,d,p){return(0,s.wg)(),(0,s.iD)("nav",c,[(0,s._)("ul",r,[(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:!i.pages.has_pre}])},[(0,s._)("a",{href:"#",class:"page-link","aria-label":"Previous",onClick:t[0]||(t[0]=(0,o.iM)((e=>p.emitPages(i.pages.current_page-1)),["prevent"]))},"上一頁")],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.pages.total_pages,(e=>((0,s.wg)(),(0,s.iD)("li",{class:(0,a.C_)(["page-item",{active:e===i.pages.current_page}]),key:e},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,o.iM)((t=>p.emitPages(e)),["prevent"])},(0,a.zw)(e),9,l)],2)))),128)),(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:!i.pages.has_next}])},[(0,s._)("a",{class:"page-link","aria-label":"Next",href:"#",onClick:t[1]||(t[1]=(0,o.iM)((e=>p.emitPages(i.pages.current_page+1)),["prevent"]))},"下一頁")],2)])])}var d={props:["pages"],methods:{emitPages(e){this.$emit("emit-pages",e)}}},p=i(3744);const g=(0,p.Z)(d,[["render",n]]);var u=g},4107:function(e,t,i){i.r(t),i.d(t,{default:function(){return Z}});var s=i(6252),a=i(3577),o=i(9963);const c=(0,s._)("div",{class:"section"},[(0,s._)("div",{class:"background-image background-image--products"}),(0,s._)("div",{class:"background-title"},[(0,s._)("h2",{class:"fw-bold"},"產品列表")])],-1),r={class:"container mt-md-5 mt-3 mb-5"},l={class:"row"},n={class:"col-md-3 position-relative"},d={class:"p-category"},p={class:"col-md-9"},g={class:"row row-cols-1 row-cols-md-2"},u={class:"card mb-4 p-card"},m=(0,s._)("button",{class:"btn btn-primary px-5 me-2"},"查看商品",-1),v=["onClick"],h={key:0},_={key:0,class:"bi bi-suit-heart-fill"},f={key:1,class:"bi bi-suit-heart"},b={class:"mb-0 mt-3 text-left"},k={class:"row align-items-center"},w={class:"text-muted col-6"},y={class:"text-end col-6"},C={class:"h4 fw-bold text-primary ms-2"},x=["onClick","disabled"],P={class:"spinner-border spinner-border-sm",role:"status"},L=(0,s.Uk)(" 加入購物車 ");function I(e,t,i,I,$,D){const M=(0,s.up)("VueLoading"),A=(0,s.up)("RouterLink"),N=(0,s.up)("PaginationView");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(M,{active:$.isLoading},null,8,["active"]),c,(0,s._)("div",r,[(0,s._)("div",l,[(0,s._)("div",n,[(0,s._)("ul",d,[(0,s._)("li",{class:(0,a.C_)(["list-group-item list-group-item-action",{active:"all"===$.isActive}])},[(0,s._)("a",{class:"px-3 px-md-4 py-1",href:"#",onClick:t[0]||(t[0]=(0,o.iM)((e=>D.getProducts(1)),["prevent"]))}," 全部")],2),(0,s._)("li",{class:(0,a.C_)(["list-group-item list-group-item-action",{active:"日本"===$.isActive}])},[(0,s._)("a",{class:"px-3 px-md-4 py-1",href:"#",onClick:t[1]||(t[1]=(0,o.iM)((e=>D.getProducts(1,"日本")),["prevent"]))}," 日本")],2),(0,s._)("li",{class:(0,a.C_)(["list-group-item list-group-item-action",{active:"太平洋"===$.isActive}])},[(0,s._)("a",{class:"px-3 px-md-4 py-1",href:"#",onClick:t[2]||(t[2]=(0,o.iM)((e=>D.getProducts(1,"太平洋")),["prevent"]))}," 太平洋")],2),(0,s._)("li",{class:(0,a.C_)(["list-group-item list-group-item-action",{active:"其他"===$.isActive}])},[(0,s._)("a",{class:"px-3 px-md-4 py-1",href:"#",onClick:t[3]||(t[3]=(0,o.iM)((e=>D.getProducts(1,"其他")),["prevent"]))}," 其他")],2)])]),(0,s._)("div",p,[(0,s._)("div",g,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.products,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"col",key:e.id},[(0,s._)("div",u,[(0,s._)("div",{class:"p-card__image",style:(0,a.j5)({backgroundImage:`url(${e.imageUrl})`})},[(0,s.Wm)(A,{to:`/product/${e.id}`,class:"hover-area"},{default:(0,s.w5)((()=>[m])),_:2},1032,["to"])],4),(0,s.Wm)(A,{to:`/product/${e.id}`,class:"card-body p-4 bg-white"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("a",{href:"#",class:"border rounded-circle p-2 me-4",onClick:(0,o.iM)((t=>D.toggleFavorite(e.id)),["prevent"])},[$.favorite.includes(e.id)?((0,s.wg)(),(0,s.iD)("span",h,[$.favorite.includes(e.id)?((0,s.wg)(),(0,s.iD)("i",_)):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("i",f))],8,v)]),(0,s._)("h4",b,(0,a.zw)(e.title),1),(0,s._)("div",k,[(0,s._)("p",w,[(0,s._)("del",null,"NT$"+(0,a.zw)(e.origin_price),1)]),(0,s._)("p",y,[(0,s._)("span",C,"NT$"+(0,a.zw)(e.price),1)])]),(0,s._)("button",{class:"btn btn-primary w-100",onClick:(0,o.iM)((t=>D.addToCart(e.id)),["prevent"]),disabled:$.isLoadingItem===e.id},[(0,s.wy)((0,s._)("span",P,null,512),[[o.F8,$.isLoadingItem===e.id]]),L],8,x)])),_:2},1032,["to"])])])))),128))]),(0,s.Wm)(N,{pages:$.pagination,onEmitPages:D.getProducts,class:"justify-content-center d-flex mt-5"},null,8,["pages","onEmitPages"])])])])],64)}var $=i(4902),D=i(2651),M={data(){return{products:[],pagination:{},currentPage:1,isLoading:!1,id:"",productId:"",isLoadingItem:"",isActive:"",category:"",favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},components:{PaginationView:D.Z},inject:["emitter"],methods:{getProducts(e=1,t){this.isActive=t;let i=`https://vue3-course-api.hexschool.io/v2/api/shio-vue/products/?page=${e}`;t?i=`https://vue3-course-api.hexschool.io/v2/api/shio-vue/products?category=${t}`:this.isActive="all",this.isLoading=!0,this.$http.get(i).then((e=>{this.products=e.data.products,this.pagination=e.data.pagination,this.isLoading=!1})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:"找不到產品",content:e.response.data.message})}))},addToCart(e,t=1){const i={product_id:e,qty:t};this.isLoadingItem=e,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/shio-vue/cart",{data:i}).then((e=>{this.emitter.emit("push-message",{style:"success",title:"購物提示",content:e.data.message}),this.isLoadingItem="",$.Z.emit("get-cart")})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:"無法加入購物車",content:e.response.data.message})}))},toggleFavorite(e){const t=this.favorite.findIndex((t=>t===e));-1===t?(this.favorite.push(e),this.emitter.emit("push-message",{style:"success",title:"已加入收藏"})):(this.favorite.splice(t,1),this.emitter.emit("push-message",{style:"success",title:"已移除收藏"}))}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}},mounted(){this.getProducts()}},A=i(3744);const N=(0,A.Z)(M,[["render",I]]);var Z=N}}]);
//# sourceMappingURL=107.65efe76e.js.map