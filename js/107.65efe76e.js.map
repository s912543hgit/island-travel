{"version":3,"file":"js/107.65efe76e.js","mappings":"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","sources":["webpack://island-travel/./src/components/PaginationView.vue","webpack://island-travel/./src/components/PaginationView.vue?d04d","webpack://island-travel/./src/views/ProductsView.vue","webpack://island-travel/./src/views/ProductsView.vue?91db"],"sourcesContent":["<template>\n  <nav aria-label=\"Page navigation\">\n    <ul class=\"pagination\">\n      <li class=\"page-item\" :class=\"{ disabled: !pages.has_pre }\">\n        <a href=\"#\" class=\"page-link\" aria-label=\"Previous\"\n          @click.prevent=\"emitPages(pages.current_page - 1)\">上一頁</a>\n      </li>\n      <li class=\"page-item\" :class=\"{ active : page === pages.current_page }\"\n        v-for=\"page in pages.total_pages\" :key=\"page\" >\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"emitPages(page)\">{{ page }}</a>\n      </li>\n      <li class=\"page-item\" :class=\"{ disabled: !pages.has_next }\">\n        <a class=\"page-link\" aria-label=\"Next\" href=\"#\"\n          @click.prevent=\"emitPages(pages.current_page + 1)\">下一頁</a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\nexport default {\n  props: ['pages'],\n  methods: {\n    emitPages (item) {\n      this.$emit('emit-pages', item)\n    }\n  }\n}\n</script>\n","import { render } from \"./PaginationView.vue?vue&type=template&id=0c7c8c96\"\nimport script from \"./PaginationView.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wangangel/project/island-travel/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <VueLoading :active=\"isLoading\"/>\n  <div class=\"section\">\n    <div class=\"background-image background-image--products\"></div>\n    <div class=\"background-title\">\n      <h2 class=\"fw-bold\">產品列表</h2>\n    </div>\n  </div>\n  <div class=\"container mt-md-5 mt-3 mb-5\">\n    <div class=\"row\">\n      <div class=\"col-md-3 position-relative\">\n        <ul class=\"p-category\">\n          <li class=\"list-group-item list-group-item-action\"\n            :class=\"{ active: isActive === 'all' }\">\n            <a class=\"px-3 px-md-4 py-1\" href=\"#\"\n              @click.prevent=\"getProducts(1)\"> 全部</a>\n          </li>\n          <li class=\"list-group-item list-group-item-action\"\n            :class=\"{ active: isActive === '日本' }\">\n            <a class=\"px-3 px-md-4 py-1\" href=\"#\"\n            @click.prevent=\"getProducts(1,'日本')\"> 日本</a>\n          </li>\n          <li class=\"list-group-item list-group-item-action\"\n            :class=\"{ active: isActive === '太平洋' }\">\n            <a class=\"px-3 px-md-4 py-1\"  href=\"#\"\n            @click.prevent=\"getProducts(1,'太平洋')\"> 太平洋</a>\n          </li>\n          <li class=\"list-group-item list-group-item-action\"\n            :class=\"{ active: isActive === '其他' }\">\n            <a class=\"px-3 px-md-4 py-1\" href=\"#\"\n            @click.prevent=\"getProducts(1,'其他')\"> 其他</a>\n          </li>\n        </ul>\n      </div>\n      <div class=\"col-md-9\">\n        <div class=\"row row-cols-1 row-cols-md-2\">\n          <div class=\"col\" v-for=\"product in products\" :key=\"product.id\">\n            <div class=\"card mb-4 p-card\">\n              <div class=\"p-card__image\" :style=\"{backgroundImage: `url(${product.imageUrl})`}\">\n                <RouterLink :to=\"`/product/${product.id}`\" class=\"hover-area\">\n                  <button class=\"btn btn-primary px-5 me-2\">查看商品</button>\n                </RouterLink>\n              </div>\n              <RouterLink :to=\"`/product/${product.id}`\" class=\"card-body p-4 bg-white\">\n                <div>\n                  <a href=\"#\" class=\"border rounded-circle p-2 me-4\"\n                     @click.prevent=\"toggleFavorite(product.id)\">\n                    <span v-if=\"favorite.includes(product.id)\">\n                      <i v-if=\"favorite.includes(product.id)\" class=\"bi bi-suit-heart-fill\"></i>\n                    </span>\n                    <i v-else class=\"bi bi-suit-heart\"></i>\n                  </a>\n                </div>\n                <h4 class=\"mb-0 mt-3 text-left\">{{ product.title }}</h4>\n                <div class=\"row align-items-center\">\n                  <p class=\"text-muted col-6\">\n                    <del>NT${{ product.origin_price }}</del>\n                  </p>\n                  <p class=\"text-end col-6\">\n                    <span class=\"h4 fw-bold text-primary ms-2\">NT${{ product.price }}</span>\n                  </p>\n                </div>\n                <button class=\"btn btn-primary w-100\"\n                  @click.prevent=\"addToCart(product.id)\"\n                  :disabled=\"isLoadingItem === product.id\">\n                  <span class=\"spinner-border spinner-border-sm\"\n                  role=\"status\" v-show=\"isLoadingItem === product.id\"></span>\n                    加入購物車\n                </button>\n              </RouterLink>\n            </div>\n          </div>\n        </div>\n        <PaginationView :pages=\"pagination\"\n          @emit-pages=\"getProducts\"\n          class=\"justify-content-center d-flex mt-5\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\nimport PaginationView from '@/components/PaginationView.vue'\n\nexport default {\n  data () {\n    return {\n      products: [],\n      pagination: {},\n      currentPage: 1,\n      isLoading: false,\n      id: '',\n      productId: '',\n      isLoadingItem: '',\n      isActive: '',\n      category: '',\n      // 從localStorage中取出的資料 必須給予預設值\n      favorite: JSON.parse(localStorage.getItem('favorite')) || []\n    }\n  },\n  components: {\n    PaginationView\n  },\n  inject: ['emitter'],\n  methods: {\n    getProducts (page = 1, category) {\n      this.isActive = category\n      let url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/?page=${page}`\n      if (category) {\n        url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?category=${category}`\n      } else {\n        this.isActive = 'all'\n      }\n      this.isLoading = true\n      this.$http.get(url)\n        .then((response) => {\n          this.products = response.data.products\n          this.pagination = response.data.pagination\n          this.isLoading = false\n        })\n        .catch((error) => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '找不到產品',\n            content: error.response.data.message\n          })\n        })\n    },\n    addToCart (id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.isLoadingItem = id\n      this.$http.post(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`, { data })\n        .then((response) => {\n          this.emitter.emit('push-message', {\n            style: 'success',\n            title: '購物提示',\n            content: response.data.message\n          })\n          this.isLoadingItem = ''\n          emitter.emit('get-cart')\n        })\n        .catch((error) => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '無法加入購物車',\n            content: error.response.data.message\n          })\n        })\n    },\n    toggleFavorite (id) {\n      // findIndex 尋找陣列中符合對象並返回index 若沒有合適的會回傳-1\n      const favoriteIndex = this.favorite.findIndex((item) => item === id)\n      if (favoriteIndex === -1) {\n        this.favorite.push(id)\n        this.emitter.emit('push-message', {\n          style: 'success',\n          title: '已加入收藏'\n        })\n      } else {\n        this.favorite.splice(favoriteIndex, 1)\n        this.emitter.emit('push-message', {\n          style: 'success',\n          title: '已移除收藏'\n        })\n      }\n    }\n  },\n  watch: {\n    favorite: {\n      handler () {\n        // 當資料有變動時就進行寫入\n        localStorage.setItem('favorite', JSON.stringify(this.favorite))\n      },\n      deep: true\n    }\n  },\n  mounted () {\n    this.getProducts()\n  }\n}\n</script>\n","import { render } from \"./ProductsView.vue?vue&type=template&id=5fad4f35\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wangangel/project/island-travel/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","disabled","$props","has_pre","href","onClick","$options","current_page","_Fragment","_renderList","total_pages","page","active","key","_hoisted_3","has_next","props","methods","emitPages","item","this","$emit","__exports__","render","role","_createVNode","_component_VueLoading","$data","_hoisted_1","product","id","style","backgroundImage","imageUrl","_component_RouterLink","to","_hoisted_9","includes","_hoisted_11","_toDisplayString","title","origin_price","price","_component_PaginationView","pages","onEmitPages","data","products","pagination","currentPage","isLoading","productId","isLoadingItem","isActive","category","favorite","JSON","parse","localStorage","getItem","components","PaginationView","inject","getProducts","url","$http","get","then","response","catch","error","emitter","emit","content","message","addToCart","qty","product_id","post","toggleFavorite","favoriteIndex","findIndex","push","splice","watch","handler","setItem","stringify","deep","mounted"],"sourceRoot":""}