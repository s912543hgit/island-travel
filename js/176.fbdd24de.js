"use strict";(self["webpackChunkisland_travel"]=self["webpackChunkisland_travel"]||[]).push([[176],{9335:function(t,a,e){e.d(a,{Z:function(){return g}});var s=e(6252);const l={class:"modal fade",tabindex:"-1",ref:"cautionModal",id:"cautionModal"},i={class:"modal-dialog"},o={class:"modal-content"},n=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title"},"移除商品"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),c=(0,s._)("div",{class:"modal-body"},[(0,s._)("p",null,"您確定要移除此商品嗎？")],-1),d={class:"modal-footer"},r=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function u(t,a,e,u,m,p){return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",i,[(0,s._)("div",o,[n,c,(0,s._)("div",d,[r,(0,s._)("button",{type:"button",class:"btn btn-outline-danger",onClick:a[0]||(a[0]=a=>t.$emit("del-product"))}," 確定移除")])])])],512)}var m=e(7424),p=e.n(m),_={data(){return{modal:""}},props:{item:{}},emits:["del-product"],methods:{openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(p())(this.$refs.cautionModal)}},h=e(3744);const v=(0,h.Z)(_,[["render",u]]);var g=v},8643:function(t,a,e){e.d(a,{Z:function(){return g}});var s=e(6252);const l={class:"modal fade",tabindex:"-1",ref:"cautionModal",id:"cautionModal"},i={class:"modal-dialog"},o={class:"modal-content"},n=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title"},"清空購物車"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),c=(0,s._)("div",{class:"modal-body"},[(0,s._)("p",null,"您確定要清空購物車裡面的商品嗎？")],-1),d={class:"modal-footer"},r=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function u(t,a,e,u,m,p){return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",i,[(0,s._)("div",o,[n,c,(0,s._)("div",d,[r,(0,s._)("button",{type:"button",class:"btn btn-outline-danger",onClick:a[0]||(a[0]=a=>t.$emit("clear-item"))},"確定清空")])])])],512)}var m=e(7424),p=e.n(m),_={data(){return{modal:""}},emits:["clear-item"],methods:{openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(p())(this.$refs.cautionModal)}},h=e(3744);const v=(0,h.Z)(_,[["render",u]]);var g=v},9176:function(t,a,e){e.d(a,{Z:function(){return pt}});var s=e(6252),l=e(3577),i=e(9963);const o={class:"header"},n={class:"header__inner container-md"},c=(0,s.Uk)("島遊"),d={class:"nav-list"},r={class:"nav-list__item"},u=(0,s.Uk)("關於我們"),m={class:"nav-list__item"},p=(0,s.Uk)("產品列表"),_={class:"nav-list__item"},h=(0,s._)("i",{class:"fs-5 bi bi-suit-heart d-none d-md-block"},null,-1),v=(0,s._)("p",{class:"d-md-none mb-0 py-2"},"收藏清單",-1),g={class:"nav-list__item"},C={class:"d-md-flex position-relative text-dark d-none d-md-block"},b=(0,s._)("i",{class:"bi bi-cart fs-5"},null,-1),k={class:"position-relative d-md-none"},f=(0,s._)("i",{class:"bi bi-cart cart-icon"},null,-1),w=(0,s._)("span",null,null,-1),y=(0,s._)("span",null,null,-1),D=(0,s._)("span",null,null,-1),M=[w,y,D];function x(t,a,e,w,y,D){const x=(0,s.up)("RouterLink"),$=(0,s.up)("CartNav");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",o,[(0,s._)("div",n,[(0,s._)("h1",{class:(0,l.C_)(["header__title",{active:y.isClicked}])},[(0,s.Wm)(x,{to:"/"},{default:(0,s.w5)((()=>[c])),_:1})],2),(0,s._)("nav",{class:(0,l.C_)(["header__nav nav",{active:y.isClicked}])},[(0,s._)("ul",d,[(0,s._)("li",r,[(0,s.Wm)(x,{class:"nav-link",to:"/about",onClick:a[0]||(a[0]=t=>y.isClicked=!y.isClicked)},{default:(0,s.w5)((()=>[u])),_:1})]),(0,s._)("li",m,[(0,s.Wm)(x,{class:"nav-link",to:"/products",onClick:a[1]||(a[1]=t=>y.isClicked=!y.isClicked)},{default:(0,s.w5)((()=>[p])),_:1})]),(0,s._)("li",_,[(0,s.Wm)(x,{class:"px-3",to:"/favorite",onClick:a[2]||(a[2]=t=>y.isClicked=!y.isClicked)},{default:(0,s.w5)((()=>[h,v])),_:1})]),(0,s._)("li",g,[(0,s._)("div",C,[(0,s._)("a",{href:"#",onClick:a[3]||(a[3]=(0,i.iM)(((...t)=>D.openNav&&D.openNav(...t)),["prevent"]))},[b,(0,s.wy)((0,s._)("span",{class:"cart-badge top-0 start-100 badge"},(0,l.zw)(y.cartData?.carts?.length),513),[[i.F8,y.cartData.carts.length]])])])])])],2),(0,s._)("div",{class:(0,l.C_)(["nav__footer",{active:y.isClicked}])},[(0,s._)("div",k,[(0,s.Wm)(x,{to:"/cart"},{default:(0,s.w5)((()=>[f,(0,s.wy)((0,s._)("span",{class:"badge cart-badge"},(0,l.zw)(y.cartData?.carts?.length),513),[[i.F8,y.cartData.carts.length]])])),_:1})]),(0,s._)("button",{class:(0,l.C_)(["header__hamburger hamburger",{active:y.isClicked}]),onClick:a[4]||(a[4]=t=>y.isClicked=!y.isClicked)},M,2)],2)])]),(0,s.Wm)($)],64)}var $=e(4902);const L={class:"cartNav"},Z={class:"cartNav__inner"},N={class:"cartNav__header"},W=(0,s._)("p",null,"購物車",-1),I={class:"cart__list"},U={class:"d-flex justify-content-between"},z=["onClick"],q=["src","alt"],P={class:"cart__card__content"},Y={class:"input-group cart__count"},j={class:"input-group input-group-sm"},H={class:"input-group my-2"},F=["onUpdate:modelValue","onChange","disabled"],V=(0,s._)("option",{selected:""},"請選擇人數",-1),K=["value","selected"],R={class:"input-group-text"},T={class:"mb-0 ms-auto"},E={class:"cart__footer"},O={class:"cart__info"},S={class:"table"},A=(0,s._)("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"總金額",-1),B={class:"text-end border-0 px-0 pt-4"},G={class:"text-center"},J=(0,s._)("button",{class:"btn btn-primary mt-4 w-100 py-3",type:"button"}," 前往購物車 ",-1),Q=["disabled"],X={class:"spinner-border spinner-border-sm",role:"status"},tt=(0,s.Uk)(" 清空購物車 "),at={key:1,class:"p-product--none d-flex flex-column justify-content-center align-items-center"},et=(0,s._)("p",null,"購物車內沒有商品唷",-1),st=(0,s.Uk)("開始旅程");function lt(t,a,e,o,n,c){const d=(0,s.up)("VueLoading"),r=(0,s.up)("RouterLink"),u=(0,s.up)("CautionModal"),m=(0,s.up)("CautionDelModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(d,{active:n.isLoading},null,8,["active"]),(0,s._)("div",{class:(0,l.C_)(n.toggleCart?"open":"")},[(0,s._)("nav",L,[(0,s._)("div",Z,[(0,s._)("div",N,[W,(0,s._)("span",{class:"icon--close cartNav__close",onClick:a[0]||(a[0]=(...t)=>c.closeCart&&c.closeCart(...t))})]),n.cartData.carts.length?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("ul",I,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.cartData.carts,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"card cart__card",key:t.id},[(0,s._)("div",U,[(0,s._)("span",{class:"icon--close icon-close--sp cartNav__close",onClick:a=>c.openDelModal(t)},null,8,z),(0,s._)("img",{src:t.product.imageUrl,class:"cart__image w-auto",alt:t.product.title},null,8,q),(0,s._)("div",P,[(0,s.Uk)((0,l.zw)(t.product.title)+" ",1),(0,s._)("div",Y,[(0,s._)("div",j,[(0,s._)("div",H,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a=>t.qty=a,onChange:a=>c.updateCartItem(t),disabled:n.isLoadingItem===t.id},[V,((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(20,(a=>(0,s._)("option",{value:a,selected:t.qty===a,key:`${a}-${t.id}`},(0,l.zw)(a),9,K))),64))],40,F),[[i.bM,t.qty]]),(0,s._)("span",R,(0,l.zw)(t?.product?.unit),1)])])]),(0,s._)("p",T,"小計: NT$ "+(0,l.zw)(t?.product?.price),1)])])])))),128))]),(0,s._)("div",E,[(0,s._)("div",O,[(0,s._)("table",S,[(0,s._)("tbody",null,[(0,s._)("tr",null,[A,(0,s._)("td",B,"NT$"+(0,l.zw)(n.cartData.total),1)])])])])]),(0,s._)("div",G,[(0,s.Wm)(r,{to:"/cart",class:"text-white",onClick:c.closeCart},{default:(0,s.w5)((()=>[J])),_:1},8,["onClick"]),(0,s._)("button",{class:"btn btn-outline-danger mt-3 py-2",type:"button",disabled:"clear"===n.isDisabled,onClick:a[1]||(a[1]=t=>c.openModal())},[(0,s.wy)((0,s._)("span",X,null,512),[[i.F8,"clear"===n.isDisabled]]),tt],8,Q)])],64)):((0,s.wg)(),(0,s.iD)("div",at,[et,(0,s.Wm)(r,{to:"/products",class:"button--jump",onClick:c.closeCart},{default:(0,s.w5)((()=>[st])),_:1},8,["onClick"])]))])]),(0,s._)("div",{class:(0,l.C_)(["cartNav__mask",n.toggleCart?"open":""]),onClick:a[2]||(a[2]=(...t)=>c.closeCart&&c.closeCart(...t))},null,2)],2),(0,s.Wm)(u,{ref:"cautionModal",onClearItem:c.clearCartItem},null,8,["onClearItem"]),(0,s.Wm)(m,{item:n.tempProduct,ref:"cautionDelModal",onDelProduct:c.removeCartItem},null,8,["item","onDelProduct"])],64)}var it=e(8643),ot=e(9335),nt={data(){return{cartData:{carts:{}},tempProduct:{},isLoading:!1,isLoadingItem:"",isDisabled:"",toggleCart:!1}},components:{CautionModal:it.Z,CautionDelModal:ot.Z},inject:["emitter"],methods:{openCart(){this.toggleCart=!0},closeCart(){this.toggleCart=!1},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/shio-vue/cart").then((t=>{this.cartData=t.data.data})).catch((t=>{this.emitter.emit("push-message",{title:"找不到產品",content:t.response.data.message})}))},removeCartItem(t){this.isLoading=!0;const a=this.$refs.cautionDelModal;this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/shio-vue/cart/${this.tempProduct.id}`).then((t=>{this.getCart(),this.emitter.emit("push-message",{style:"success",title:"購物提示",content:t.data.message}),$.Z.emit("get-cart"),a.hideModal(),this.isLoading=!1})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:"無法刪除",content:t.response.data.message})}))},clearCartItem(){this.isLoading=!0;const t=this.$refs.cautionModal;this.$http.delete("https://vue3-course-api.hexschool.io/v2/api/shio-vue/carts/").then((a=>{this.getCart(),this.emitter.emit("push-message",{title:"已清空購物車"}),$.Z.emit("get-cart"),t.hideModal(),this.isLoading=!1})).catch((t=>{this.emitter.emit("push-message",{title:"清空失敗",content:t.response.data.message})}))},updateCartItem(t){const a={product_id:t.product.id,qty:t.qty};this.isLoading=!0,this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/shio-vue/cart/${t.id}`,{data:a}).then((t=>{this.getCart(),this.isLoading=!1})).catch((t=>{this.emitter.emit("push-message",{title:"更新失敗",content:t.response.data.message})}))},openModal(){const t=this.$refs.cautionModal;t.openModal()},openDelModal(t){this.tempProduct={...t};const a=this.$refs.cautionDelModal;a.openModal()}},mounted(){this.getCart(),$.Z.on("get-cart",(()=>{this.getCart()})),$.Z.on("toggle-cart",(t=>{this.toggleCart=!!t}))}},ct=e(3744);const dt=(0,ct.Z)(nt,[["render",lt]]);var rt=dt;window.addEventListener("scroll",(function(){const t=document.querySelector(".header");t.classList.toggle("menu-scroll",window.scrollY>100)}));var ut={data(){return{cartData:{carts:{}},isClicked:!1,isOpen:!1}},components:{CartNav:rt},inject:["emitter"],methods:{getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/shio-vue/cart").then((t=>{this.cartData=t.data.data})).catch((t=>{this.emitter.emit("push-message",{title:"找不到商品",content:t.response.data.message})}))},openNav(){$.Z.emit("toggle-cart",!0)}},mounted(){this.getCart(),$.Z.on("get-cart",(()=>{this.getCart()}))}};const mt=(0,ct.Z)(ut,[["render",x]]);var pt=mt}}]);
//# sourceMappingURL=176.fbdd24de.js.map