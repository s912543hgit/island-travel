"use strict";(self["webpackChunkisland_travel"]=self["webpackChunkisland_travel"]||[]).push([[44],{9807:function(e,s,a){a.r(s),a.d(s,{default:function(){return B}});var l=a(6252),t=a(3577),i=a(9963);const r=(0,l._)("div",{class:"section"},[(0,l._)("div",{class:"position-absolute background-image background-image--cart"}),(0,l._)("div",{class:"background-title"},[(0,l._)("h2",{class:"fw-bold"},"填寫資料")])],-1),o={class:"container"},d={class:"mt-5"},c=(0,l.uE)('<ul class="p-steps list-unstyled mb-5"><li class="col-4 mb-md-0 mb-3"><small>STEP1</small><p>購物車</p></li><li class="col-4 mb-md-0 mb-3 is-active"><small>STEP2</small><p>填寫資料</p></li><li class="col-4"><small>STEP3</small><p>完成訂單</p></li></ul><div class="row"><div class="col-md-12"><div class="d-flex justify-content-center align-items-center mb-5"><h3 class="section-heading">填寫資料</h3></div></div></div>',2),n={class:"row justify-content-between pb-5"},m={key:0,class:"cart__order"},u={class:"cart__info"},p=(0,l._)("div",{class:"d-flex justify-content-center align-items-center mb-5"},[(0,l._)("h3",{class:"section-heading"},"訂單摘要")],-1),b={class:"my-4"},f=["src","alt"],_={class:"w-100"},h={class:"d-flex justify-content-between"},v={class:"mb-0 fw-bold"},g={class:"mb-0"},w={class:"mb-0 fw-bold mt-4"},y={class:"table mt-4 border-top border-bottom"},x=(0,l._)("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"總金額",-1),V={class:"text-end border-0 px-0 pt-4"},k={class:"d-flex justify-content-between mt-4"},D=(0,l._)("p",{class:"mb-0 h4 fw-bold"},"訂單金額",-1),W={class:"mb-0 h4 fw-bold text-primary"},C={class:"cart__form"},q=(0,l._)("div",{class:"d-flex justify-content-center align-items-center mb-5"},[(0,l._)("h3",{class:"section-heading"},"填寫資料")],-1),T={class:"mb-3"},U=(0,l._)("label",{for:"email",class:"form-label"},"電子郵件",-1),$={class:"mb-3"},j=(0,l._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),L={class:"mb-3"},z=(0,l._)("label",{for:"tel",class:"form-label"},"收件人電話",-1),E={class:"mb-3"},P=(0,l._)("label",{for:"address",class:"form-label"},"收件人地址",-1),S={class:"mb-3"},F=(0,l._)("label",{for:"message",class:"form-label"},"留言",-1),N={class:"text-end"},H=["disabled"],O={class:"spinner-border spinner-border-sm",role:"status"},Y=(0,l.Uk)(" 送出訂單 ");function Z(e,s,a,Z,K,M){const R=(0,l.up)("VueLoading"),A=(0,l.up)("VueField"),B=(0,l.up)("ErrorMessage"),G=(0,l.up)("VueForm");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(R,{active:K.isLoading},null,8,["active"]),r,(0,l._)("div",o,[(0,l._)("div",d,[c,(0,l._)("div",n,[K.cartData.carts?((0,l.wg)(),(0,l.iD)("div",m,[(0,l._)("div",u,[p,(0,l._)("div",b,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(K.cartData.carts,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"d-flex mb-3",key:e.id},[(0,l._)("img",{src:e.product.imageUrl,alt:e.product.title,class:"me-3 cart__image"},null,8,f),(0,l._)("div",_,[(0,l._)("div",h,[(0,l._)("p",v,(0,t.zw)(e.product.title),1),(0,l._)("p",g,"NT$"+(0,t.zw)(e.product.price),1)]),(0,l._)("p",w,(0,t.zw)(e.qty)+"人",1)])])))),128)),(0,l._)("table",y,[(0,l._)("tbody",null,[(0,l._)("tr",null,[x,(0,l._)("td",V,"NT$"+(0,t.zw)(K.cartData.total),1)])])]),(0,l._)("div",k,[D,(0,l._)("p",W,"NT$"+(0,t.zw)(K.cartData.total),1)])])]),(0,l._)("div",C,[q,(0,l.Wm)(G,{ref:"form",onSubmit:s[5]||(s[5]=e=>M.putOrder())},{default:(0,l.w5)((({errors:e})=>[(0,l._)("div",T,[U,(0,l.Wm)(A,{id:"email",name:"email",type:"email",class:(0,t.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入電子郵件",rules:"email|required",modelValue:K.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=e=>K.form.user.email=e)},null,8,["class","modelValue"]),(0,l.Wm)(B,{name:"email",class:"invalid-feedback"})]),(0,l._)("div",$,[j,(0,l.Wm)(A,{id:"name",name:"姓名",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:K.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=e=>K.form.user.name=e)},null,8,["class","modelValue"]),(0,l.Wm)(B,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",L,[z,(0,l.Wm)(A,{id:"tel",name:"電話",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:M.isPhone,modelValue:K.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=e=>K.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,l.Wm)(B,{name:"電話",class:"invalid-feedback"})]),(0,l._)("div",E,[P,(0,l.Wm)(A,{id:"address",name:"地址",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:K.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=e=>K.form.user.address=e)},null,8,["class","modelValue"]),(0,l.Wm)(B,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",S,[F,(0,l.wy)((0,l._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=e=>K.form.message=e)},null,512),[[i.nr,K.form.message]])]),(0,l._)("div",N,[(0,l._)("button",{type:"submit",class:"btn btn-primary",disabled:"send"===K.isDisabled},[(0,l.wy)((0,l._)("span",O,null,512),[[i.F8,"send"===K.isDisabled]]),Y],8,H)])])),_:1},512)])])):(0,l.kq)("",!0)])])])],64)}var K=a(4902),M={data(){return{cartData:{},isLoading:!1,form:{user:{email:"",name:"",address:"",phone:""},message:""},isDisabled:""}},methods:{getCart(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/shio-vue/cart").then((e=>{this.cartData=e.data.data,this.isLoading=!1})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:"無法取得商品",content:e.response.data.message})}))},putOrder(){this.$http.post("https://vue3-course-api.hexschool.io/v2/api/shio-vue/order",{data:this.form}).then((e=>{this.getCart(),K.Z.emit("get-cart"),this.isLoading=!0,this.$router.push("/complete")})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:"訂購失敗",content:e.response.data.message})}))},isPhone(e){const s=/^(09)[0-9]{8}$/;return!!s.test(e)||"需要正確的電話號碼"},isRequired(e){return!!e||"This field is required"}},mounted(){this.getCart()}},R=a(3744);const A=(0,R.Z)(M,[["render",Z]]);var B=A}}]);
//# sourceMappingURL=44.328def6b.js.map